(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{49:function(e){e.exports=JSON.parse('{"__schema":{"types":[{"kind":"UNION","name":"Node","possibleTypes":[{"name":"User"},{"name":"Photo"}]}]}}')},60:function(e,t,n){e.exports=n(95)},79:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},88:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(48),c=n.n(o),i=n(16),l=n(13),s=n(43),u=n(24),m=n(20),d=n(50),f=n(52),p=n(59),h=n(2),g=n(49),b=n(6),v=n(12),E=n(7),O=n.n(E);function j(){var e=Object(b.a)(["\n\tfragment PageMetaData on PageInfo {\n\t\thasNextPage\n\t\tendCursor\n\t}\n"]);return j=function(){return e},e}function y(){var e=Object(b.a)(["\n\tfragment TimelinePhoto on Photo {\n\t\tid\n\t\tdescription\n\n\t\tphotoUrl\n\n\t\ttotalComment\n\t\tcategory\n\t\tcreatedAt\n\t\towner {\n\t\t\t...TimelineUser\n\t\t}\n\t\tlikes\n\t}\n\n\t","\n"]);return y=function(){return e},e}function I(){var e=Object(b.a)(["\n\tfragment ReplyDataSub on Reply {\n\t\tid\n\t\tcontent\n\t\tcommentId\n\t\tcreatedAt\n\t\treplier {\n\t\t\t...TimelineUser\n\t\t}\n\t}\n\t","\n"]);return I=function(){return e},e}function P(){var e=Object(b.a)(["\n\tfragment ReplyData on Reply {\n\t\tid\n\t\tcontent\n\t\tcreatedAt\n\t\treplier {\n\t\t\t...TimelineUser\n\t\t}\n\t}\n\t","\n"]);return P=function(){return e},e}function N(){var e=Object(b.a)(["\n\tfragment PhotoComment on Comment {\n\t\tid\n\t\tcontent\n\t\tcreatedAt\n\t\tcommentor {\n\t\t\t...TimelineUser\n\t\t}\n\t\ttotalLike\n\t\ttotalReply\n\t}\n\t","\n"]);return N=function(){return e},e}function k(){var e=Object(b.a)(["\n\tfragment TimelineUser on User {\n\t\tid\n\t\tusername\n\t\tprofile {\n\t\t\tid\n\t\t\tpicture\n\t\t\tabout\n\t\t}\n\t}\n"]);return k=function(){return e},e}var S=O()(k()),C=O()(N(),S),w=O()(P(),S),$=O()(I(),S),U=O()(y(),S),D=O()(j());function T(){var e=Object(b.a)(["\n\tquery getMeProfile($userId: ID!) {\n\t\tgetMeProfile(userId: $userId) @client {\n\t\t\tprofile {\n\t\t\t\tpicture\n\t\t\t}\n\t\t}\n\t}\n"]);return T=function(){return e},e}function x(){var e=Object(b.a)(["\n\tquery getNotifications {\n\t\tnotifications @client {\n\t\t\t...TimelinePhoto\n\t\t}\n\t}\n\t","\n"]);return x=function(){return e},e}function q(){var e=Object(b.a)(["\n\tquery photoById($id: ID!) {\n\t\tphoto(id: $id) {\n\t\t\tcomment {\n\t\t\t\t...PhotoComment\n\t\t\t}\n\t\t}\n\t}\n\t","\n"]);return q=function(){return e},e}function _(){var e=Object(b.a)(["\n\tquery getGithubCode {\n\t\tgithubCode @client\n\t}\n"]);return _=function(){return e},e}function F(){var e=Object(b.a)(["\n\tquery getSigningInorUp {\n\t\tsigningInOrUp @client\n\t}\n"]);return F=function(){return e},e}function R(){var e=Object(b.a)(["\n\tquery getAuthUser {\n\t\tauthUser @client {\n\t\t\tuserId\n\t\t\ttoken\n\t\t}\n\t}\n"]);return R=function(){return e},e}var A=O()(R()),L=O()(F()),Q=O()(_()),B=(O()(q(),C),O()(x(),U)),G=O()(T());function z(){var e=Object(b.a)(["\n\tquery searchPhotos($first: Int, $after: String, $sorting: PhotoSortData, $searchText: String!) {\n\t\tsearchPhotos(first: $first, after: $after, sorting: $sorting, searchText: $searchText) {\n\t\t\tpageInfo {\n\t\t\t\t...PageMetaData\n\t\t\t}\n\t\t\tedges {\n\t\t\t\tnode {\n\t\t\t\t\t... on Photo {\n\t\t\t\t\t\t...TimelinePhoto\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t","\n\t","\n"]);return z=function(){return e},e}function Y(){var e=Object(b.a)(["\n\tquery searchUsers($first: Int, $after: String, $sorting: UserSortData, $searchText: String) {\n\t\tsearchUsers(first: $first, after: $after, sorting: $sorting, searchText: $searchText) {\n\t\t\tpageInfo {\n\t\t\t\t...PageMetaData\n\t\t\t}\n\t\t\tedges {\n\t\t\t\tnode {\n\t\t\t\t\t... on User {\n\t\t\t\t\t\t...TimelineUser\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t","\n\t","\n"]);return Y=function(){return e},e}function J(){var e=Object(b.a)(["\n\tquery photoLikers($ids: [ID!]!) {\n\t\tphotoLikers(ids: $ids) {\n\t\t\t...TimelineUser\n\t\t}\n\t}\n\t","\n"]);return J=function(){return e},e}function W(){var e=Object(b.a)(["\n\tquery getComments($photoId: ID!) {\n\t\tcommentsByPhotoId(photoId: $photoId) {\n\t\t\t...PhotoComment\n\t\t\treplies {\n\t\t\t\t...ReplyData\n\t\t\t}\n\t\t}\n\t}\n\t","\n\t","\n"]);return W=function(){return e},e}function K(){var e=Object(b.a)(["\n\tquery getUserInfo {\n\t\tme {\n\t\t\t...TimelineUser\n\t\t}\n\t}\n\t","\n"]);return K=function(){return e},e}function H(){var e=Object(b.a)(["\n\tquery user($id: ID!, $first: Int, $after: String, $sorting: PhotoSortData, $filter: PhotoFilter) {\n\t\tuser(id: $id) {\n\t\t\tusername\n\t\t\tprofile {\n\t\t\t\tabout\n\t\t\t\tpicture\n\t\t\t}\n\t\t\tsharedPhotos(first: $first, after: $after, sorting: $sorting, filter: $filter) {\n\t\t\t\tpageInfo {\n\t\t\t\t\t...PageMetaData\n\t\t\t\t}\n\t\t\t\tedges {\n\t\t\t\t\tnode {\n\t\t\t\t\t\t... on Photo {\n\t\t\t\t\t\t\t...TimelinePhoto\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tme {\n\t\t\t...TimelineUser\n\t\t}\n\t}\n\t","\n\t","\n\t","\n"]);return H=function(){return e},e}function Z(){var e=Object(b.a)(["\n\tquery getTimelineData($first: Int, $after: String, $sorting: PhotoSortData, $filter: PhotoFilter) {\n\t\tphotos(first: $first, after: $after, sorting: $sorting, filter: $filter) {\n\t\t\tpageInfo {\n\t\t\t\t...PageMetaData\n\t\t\t}\n\t\t\tedges {\n\t\t\t\tnode {\n\t\t\t\t\t... on Photo {\n\t\t\t\t\t\t...TimelinePhoto\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tme {\n\t\t\t...TimelineUser\n\t\t}\n\t}\n\t","\n\t","\n\t","\n"]);return Z=function(){return e},e}var V=O()(Z(),U,S,D),X=O()(H(),U,S,D),ee=(O()(K(),S),O()(W(),C,w)),te=O()(J(),S),ne=(O()(Y(),S,D),O()(z(),U,D));function ae(){var e=Object(b.a)(["\n\t\t\t\tfragment UpdateMeProfile on User {\n\t\t\t\t\tprofile {\n\t\t\t\t\t\tabout\n\t\t\t\t\t\tpicture\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t"]);return ae=function(){return e},e}function re(){var e=Object(b.a)(["\n\t\t\t\tfragment updateTotalLikes on Photo {\n\t\t\t\t\tlikes\n\t\t\t\t}\n\t\t\t"]);return re=function(){return e},e}function oe(){var e=Object(b.a)(["\n\t\t\t\tfragment updateTotalCount on Photo {\n\t\t\t\t\ttotalComment\n\t\t\t\t}\n\t\t\t"]);return oe=function(){return e},e}var ce={Mutation:{setAuthUser:function(e,t,n){var a=t.user,r=n.cache,o=r.readQuery({query:A}).authUser;return r.writeData({data:{authUser:Object(l.a)({},o,{},a)}}),null},setSigningInOrUp:function(e,t,n){var a=t.state;return n.cache.writeData({data:{signingInOrUp:a}}),null},setGithubCode:function(e,t,n){var a=t.value;return n.cache.writeData({data:{githubCode:a}}),null},setNotification:function(e,t,n){var a=n.cache,r=a.readQuery({query:B}).notifications;return a.writeData({data:{notifications:[].concat(Object(v.a)(r),[t.notification])}}),t.notification},updateTotalCommentCount:function(e,t,n){var a=n.cache,r=(0,n.getCacheKey)({__typename:"Photo",id:t.id}),o=O()(oe()),c=a.readFragment({fragment:o,id:r}),i=Object(l.a)({},c,{totalComment:c.totalComment+1});return a.writeData({id:r,data:i}),null},updateTotalLikes:function(e,t,n){var a,r=n.cache,o=(0,n.getCacheKey)({__typename:"Photo",id:t.photoId}),c=O()(re()),i=r.readFragment({fragment:c,id:o});"like"===t.action&&(a=Object(l.a)({},i,{likes:[].concat(Object(v.a)(i.likes),[t.likerId])})),"unlike"===t.action&&(a=Object(l.a)({},i,{likes:i.likes.filter((function(e){return e!==t.likerId}))})),r.writeData({id:o,data:a})},addPhotoToLocalStore:function(e,t,n){var a=t.photo,r=t.userId,o=n.cache,c=o.readQuery({query:V}),i=c.photos,s=c.me,u={node:Object(l.a)({},a),__typename:"Edge"};i.edges=[u].concat(Object(v.a)(i.edges)),o.writeQuery({query:V,data:{photos:i,me:s}}),r&&function(e){var t=e.cache,n=e.photo,a=e.userId;try{var r=t.readQuery({query:X,variables:{id:a}}),o=r.user,c=r.me,i={node:Object(l.a)({},n),__typename:"Edge"};o.sharedPhotos.edges=[i].concat(Object(v.a)(o.sharedPhotos.edges)),t.writeQuery({query:X,variables:{id:a},data:{user:o,me:c}})}catch(s){}}({cache:o,photo:a,userId:r})},removePhotoFromLocalStore:function(e,t,n){var a=t.photo,r=n.cache,o=r.readQuery({query:B}).notifications;r.writeQuery({query:B,data:{notifications:o.filter((function(e){return e.id!==a.id}))}})},updateMeProfile:function(e,t,n){var a=t.userId,r=t.profile,o=n.cache,c=(0,n.getCacheKey)({__typename:"User",id:a}),i=O()(ae()),s=o.readFragment({fragment:i,id:c});console.log("user from cache",s);var u=Object(l.a)({},s,{profile:Object(l.a)({},r)});return console.log("data before writing to cache ",u),o.writeData({id:c,data:u}),null}},Query:{getMeProfile:function(e,t,n){return n.cache.readQuery({query:V}).me}}};var ie=Object(d.a)((function(e){var t=e.graphQLErrors,n=e.networkError;t&&t.forEach((function(e){var t=e.message,n=e.locations,a=e.path;return console.log("[GraphQL error]: Message: ".concat(t,", Location: ").concat(n,", Path: ").concat(a))})),n&&console.log("[Network error]: ".concat(n))})),le=new m.a((function(e,t){return e.setContext((function(e){var t=e.headers;return{headers:Object(l.a)({},t,{authorization:localStorage.getItem("auth_user")?"token ".concat(JSON.parse(localStorage.getItem("auth_user")).token):""})}})),t(e)})),se=Object(f.createUploadLink)({uri:"https://instaphotosharing-app.herokuapp.com/graphql"}),ue=new p.a({uri:"ws://instaphotosharing-app.herokuapp.com/graphql",options:{reconnect:!0}}),me=Object(m.c)((function(e){var t=e.query,n=Object(h.l)(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation}),ue,se),de=m.a.from([le,ie,me]),fe=new s.b({introspectionQueryResultData:g}),pe=new s.a({fragmentMatcher:fe}),he={authUser:{token:localStorage.getItem("auth_user")?JSON.parse(localStorage.getItem("auth_user")).token:"",userId:localStorage.getItem("auth_user")?JSON.parse(localStorage.getItem("auth_user")).userId:"",__typename:"AuthResponse"},signingInOrUp:!1,notifications:[],githubCode:""};pe.writeData({data:he});var ge=new u.a({cache:pe,link:de,connectToDevTools:!0,resolvers:ce});ge.onResetStore((function(){pe.writeData({data:he})}));n(79);var be=n(3),ve=n(19),Ee=n(23),Oe=(n(80),n(81),n(82),n(5)),je=function(e){return r.a.createElement("div",Object.assign({className:"progress pink"},e),r.a.createElement("div",{className:"indeterminate pink lighten-4"}))},ye=function(e){var t=e.message,n=e.color,a=e.outDuration;M.toast({html:t,classes:n,outDuration:a||375})},Ie=n(10),Pe=n(9),Ne=function(e){var t=e.children,n=e.className,a=Object(Pe.a)(e,["children","className"]);return r.a.createElement("div",Object.assign({className:Object(Ie.a)(["card",n])},a),t)},ke=function(e){var t=e.children,n=e.className,a=Object(Pe.a)(e,["children","className"]);return r.a.createElement("div",Object.assign({className:Object(Ie.a)(["card-title",n])},a),t)},Se=function(e){var t=e.children,n=e.className,a=Object(Pe.a)(e,["children","className"]);return r.a.createElement("div",Object.assign({className:Object(Ie.a)(["card-content",n])},a),t)},Ce=function(e){var t=e.children,n=e.className,a=Object(Pe.a)(e,["children","className"]);return r.a.createElement("div",Object.assign({className:Object(Ie.a)(["card-action",n])},a),t)},we=function(e){var t=e.className,n=e.src,a=e.children,o=e.text,c=Object(Pe.a)(e,["className","src","children","text"]);return r.a.createElement("div",Object.assign({className:Object(Ie.a)(["card-image",t])},c),r.a.createElement("img",{src:n,alt:o}),a)},$e=function(e){var t=e.children,n=e.id,a=e.title,o=e.className;return r.a.createElement("div",null,r.a.createElement("div",{id:n,className:Object(Ie.a)(["modal",o])},r.a.createElement("div",{className:"modal-content"},r.a.createElement("h5",{className:"center-align pink-text",id:"modal-title"},a),t)))},Ue=function(e){var t=e.children;Object(Pe.a)(e,["children"]);return r.a.createElement("div",{className:"container"},t)},De=(n(83),function(e){var t=e.src;return r.a.createElement("img",{src:t,alt:"",className:"custom-avatar"})}),Te=(n(84),function(){return r.a.createElement("span",{className:"divider"})}),xe=n(54);function Me(){var e=Object(b.a)(["\n\tmutation providerSignIn($signinData: ProviderSignInData!) {\n\t\tproviderSignIn(signinData: $signinData) {\n\t\t\ttoken\n\t\t\tuserId\n\t\t}\n\t}\n"]);return Me=function(){return e},e}function qe(){var e=Object(b.a)(["\n\tmutation editProfilePicture($id: ID!, $picture: Upload!) {\n\t\teditProfilePicture(id: $id, picture: $picture) {\n\t\t\tid\n\t\t\tpicture\n\t\t}\n\t}\n"]);return qe=function(){return e},e}function _e(){var e=Object(b.a)(["\n\tmutation editProfile($id: ID!, $about: String!) {\n\t\teditProfile(id: $id, about: $about) {\n\t\t\tid\n\t\t\tabout\n\t\t}\n\t}\n"]);return _e=function(){return e},e}function Fe(){var e=Object(b.a)(["\n\tmutation createProfile($profileData: CreateProfileData!) {\n\t\tcreateProfile(profileData: $profileData) {\n\t\t\tid\n\t\t\tpicture\n\t\t\tabout\n\t\t}\n\t}\n"]);return Fe=function(){return e},e}function Re(){var e=Object(b.a)(["\n\tmutation createPhoto($photoData: CreatePhotoData!) {\n\t\tcreatePhoto(photoData: $photoData) {\n\t\t\t...TimelinePhoto\n\t\t}\n\t}\n\t","\n"]);return Re=function(){return e},e}function Ae(){var e=Object(b.a)(["\n\tmutation signUpUsingForm($signupData: CreateUserData) {\n\t\tformSignUp(newUser: $signupData) {\n\t\t\tid\n\t\t}\n\t}\n"]);return Ae=function(){return e},e}function Le(){var e=Object(b.a)(["\n\tmutation signInUsingForm($signinData: FormSigninUserData!) {\n\t\tformSignIn(signinData: $signinData) {\n\t\t\tuserId\n\t\t\ttoken\n\t\t}\n\t}\n"]);return Le=function(){return e},e}function Qe(){var e=Object(b.a)(["\n\tmutation createReply($reply: CreateReplyData!) {\n\t\tcreateReply(reply: $reply) {\n\t\t\t...ReplyData\n\t\t}\n\t}\n\t","\n"]);return Qe=function(){return e},e}function Be(){var e=Object(b.a)(["\n\tmutation unlikePhoto($unlikePhotoData: UnlikePhoto!) {\n\t\tunlikePhoto(unlikePhotoData: $unlikePhotoData) {\n\t\t\tdescription\n\t\t}\n\t}\n"]);return Be=function(){return e},e}function Ge(){var e=Object(b.a)(["\n\tmutation likePhoto($likePhotoData: LikePhoto!) {\n\t\tlikePhoto(likePhotoData: $likePhotoData) {\n\t\t\tdescription\n\t\t}\n\t}\n"]);return Ge=function(){return e},e}function ze(){var e=Object(b.a)(["\n\tmutation createComment($comment: CreateCommentData!) {\n\t\tcreateComment(comment: $comment) {\n\t\t\t...PhotoComment\n\t\t\treplies {\n\t\t\t\t...ReplyData\n\t\t\t}\n\t\t}\n\t}\n\t","\n\t","\n"]);return ze=function(){return e},e}var Ye=O()(ze(),C,w),Je=O()(Ge()),We=O()(Be()),Ke=O()(Qe(),w),He=O()(Le()),Ze=O()(Ae()),Ve=O()(Re(),U),Xe=O()(Fe()),et=O()(_e()),tt=O()(qe()),nt=O()(Me()),at=function(e){var t=e.children,n=e.className,a=Object(Pe.a)(e,["children","className"]);return r.a.createElement("button",Object.assign({style:{textTransform:"capitalize"},className:Object(Ie.a)(["btn waves-effect waves-light btn-flat product-btn",n])},a),t)},rt=(n(85),function(e){var t=e.children,n=e.className,a=Object(Pe.a)(e,["children","className"]);return r.a.createElement("div",Object.assign({className:Object(Ie.a)(["row",n])},a),t)}),ot=n(22),ct=function(e){var t=e.sm,n=e.md,a=e.lg,r=e.smOffset,o=e.mdOffset,c=e.lgOffset,i=e.className,l="s".concat(t),s="m".concat(n),u="l".concat(a),m="offset-s".concat(r),d="offset-m".concat(o),f="offset-l".concat(c);return Object(Ie.a)(["col",Object(ot.a)({},l,t),Object(ot.a)({},s,n),Object(ot.a)({},u,a),Object(ot.a)({},m,r),Object(ot.a)({},d,o),Object(ot.a)({},f,c),i])},it=function(e){var t=e.children,n=Object(Pe.a)(e,["children"]);return r.a.createElement("div",{className:ct(n)},t)};function lt(){var e=Object(b.a)(["\n\tmutation UpdateMeProfile($profile: Profile!, $userId: ID!) {\n\t\tupdateMeProfile(profile: $profile, userId: $userId) @client\n\t}\n"]);return lt=function(){return e},e}function st(){var e=Object(b.a)(["\n\tmutation SetNotification($notification: Photo!) {\n\t\tsetNotification(notification: $notification) @client\n\t}\n"]);return st=function(){return e},e}function ut(){var e=Object(b.a)(["\n\tmutation RemovePhotoFromLocalStore($photo: Photo!) {\n\t\tremovePhotoFromLocalStore(photo: $photo) @client\n\t}\n"]);return ut=function(){return e},e}function mt(){var e=Object(b.a)(["\n\tmutation AddPhotoToLocalStore($photo: Photo!, $userId: ID) {\n\t\taddPhotoToLocalStore(photo: $photo, userId: $userId) @client\n\t}\n"]);return mt=function(){return e},e}function dt(){var e=Object(b.a)(["\n\tmutation UpdateTotalLikes($photoId: ID!, $action: String!, $likerId: ID!) {\n\t\tupdateTotalLikes(photoId: $photoId, action: $action, likerId: $likerId) @client\n\t}\n"]);return dt=function(){return e},e}function ft(){var e=Object(b.a)(["\n\tmutation UpdateTotalCommentCount($id: ID!) {\n\t\tupdateTotalCommentCount(id: $id) @client\n\t}\n"]);return ft=function(){return e},e}function pt(){var e=Object(b.a)(["\n\tmutation setGithubCode($value: String!) {\n\t\tsetGithubCode(value: $value) @client\n\t}\n"]);return pt=function(){return e},e}function ht(){var e=Object(b.a)(["\n\tmutation setSigningInOrUp($state: Boolean!) {\n\t\tsetSigningInOrUp(state: $state) @client\n\t}\n"]);return ht=function(){return e},e}function gt(){var e=Object(b.a)(["\n\tmutation setAuthUser($user: AuthResponse!) {\n\t\tsetAuthUser(user: $user) @client\n\t}\n"]);return gt=function(){return e},e}O()(gt());var bt=O()(ht()),vt=O()(pt()),Et=O()(ft()),Ot=O()(dt()),jt=O()(mt()),yt=O()(ut()),It=O()(st()),Pt=O()(lt()),Nt=(n(86),r.a.forwardRef((function(e,t){var n=e.id,a=e.labelClassName,o=e.styleLabel,c=e.label,i=Object(Pe.a)(e,["id","labelClassName","styleLabel","label"]);return r.a.createElement("div",{className:Object(Ie.a)(["input-field",{"login-label":o}])},r.a.createElement("input",Object.assign({},i,{id:n,ref:t})),n&&c&&r.a.createElement("label",{className:a,htmlFor:n},c))})));Nt.defaultProps={labelClassName:"active"};var kt=Nt,St=r.a.forwardRef((function(e,t){var n=e.photoId,a=Object(be.c)(A).data.authUser,o=Object(be.b)(Et),c=Object(Oe.a)(o,1)[0],i=Object(be.c)(G,{variables:{userId:a.userId}}).data,s=Object(be.b)(Ye,{update:function(e,t){var a=t.data.createComment,r=e.readQuery({query:ee,variables:{photoId:n}}).commentsByPhotoId;e.writeQuery({query:ee,variables:{photoId:n},data:{commentsByPhotoId:[].concat(Object(v.a)(r),[a])}}),c({variables:{id:n}})}}),u=Object(Oe.a)(s,2),m=u[0],d=u[1].loading,f=r.a.useState(""),p=Object(Oe.a)(f,2),h=p[0],g=p[1],b=function(e){if(h&&(13===e.keyCode||"click"===e.type)){var t={photoId:n,commentor:a.userId,content:h};m({variables:{comment:Object(l.a)({},t)}}).catch((function(e){ye({message:e.message,color:"red"})})),g("")}};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"avatar-comment-container2"},r.a.createElement(rt,null,r.a.createElement(it,{sm:2,md:1},r.a.createElement(De,{src:i&&i.getMeProfile.profile?i.getMeProfile.profile.picture:"/img/cam1.jpeg"})),r.a.createElement(it,{sm:10,md:11},r.a.createElement(kt,{value:d?"Sending...":h,onChange:function(e){return g(e.target.value)},name:"comment",labelClassName:"noactive",placeholder:"Write a comment",ref:t,onKeyUp:b,className:"write-comment-field"}))),r.a.createElement("div",{className:"right-align"},r.a.createElement(at,{disabled:d,className:"btn-auth",onClick:b},"Send"))))})),Ct=n(40),wt=n.n(Ct),$t=(n(88),function(e){var t=e.children,n=e.className,a=Object(Pe.a)(e,["children","className"]);return r.a.createElement("ul",Object.assign({className:Object(Ie.a)(["collection",n])},a),t)}),Ut=function(e){var t=e.children,n=e.className,a=Object(Pe.a)(e,["children","className"]);return r.a.createElement("li",Object.assign({className:Object(Ie.a)(["collection-item",n])},a),t)},Dt=function(e){var t=e.user,n=e.comment,a=e.visitProfile;return r.a.createElement("div",{className:"avatar-comment-container-showcomment-comp"},r.a.createElement(De,{src:t.profile?t.profile.picture:"/img/cam1.jpeg"}),r.a.createElement("p",null,r.a.createElement("span",{onClick:a,className:"commentor"},t.username),n.content))},Tt=function(e){var t=e.comment,n=e.visitProfile;return r.a.createElement($t,{style:{borderRadius:15,border:"solid 2px #e0e0e0"}},r.a.createElement(Ut,{className:"left-align"},"Replies to comment"),t.replies.map((function(e){return r.a.createElement(Ut,{key:e.id},r.a.createElement(Dt,{user:e.replier,comment:e,visitProfile:function(){return n(e.replier.id)}}),r.a.createElement("span",null,wt()(+e.createdAt).fromNow()))})))},xt=function(e){var t=e.comment,n=e.photoId,o=Object(Ee.g)(),c=Object(be.b)(Ke),i=Object(Oe.a)(c,2),s=i[0],u=i[1].loading,m=Object(a.useState)(!1),d=Object(Oe.a)(m,2),f=d[0],p=d[1],h=Object(a.useState)(!1),g=Object(Oe.a)(h,2),b=g[0],E=g[1],O=Object(a.useState)(""),j=Object(Oe.a)(O,2),y=j[0],I=j[1],P=Object(be.c)(A).data.authUser,N=function(e){if(P.userId===e)return o.push("/profile");o.push("/profile/"+e,{id:e})};return r.a.createElement("div",null,r.a.createElement(Dt,{user:t.commentor,comment:t,visitProfile:function(){return N(t.commentor.id)}}),r.a.createElement("div",{className:"right-align",style:{marginTop:5,marginBottom:10}},r.a.createElement("span",null,wt()(+t.createdAt).fromNow()),t.replies.length>0&&r.a.createElement("span",{className:"comment-replies",onClick:function(){return E((function(e){return!e}))}},r.a.createElement("span",{style:{paddingRight:2}},t.replies.length),b?"Hide":"Replies"),r.a.createElement(at,{className:" reply-btn",onClick:function(){p((function(e){return!e}))}},f?"Hide":"Reply"),b&&r.a.createElement(Tt,{comment:t,visitProfile:N}),f&&r.a.createElement("div",{style:{paddingLeft:55}},r.a.createElement(kt,{onKeyUp:function(e){13===e.keyCode&&y&&(s({variables:{reply:{replier:P.userId,commentId:t.id,content:y}},update:function(e,a){var r=a.data.createReply,o=e.readQuery({query:ee,variables:{photoId:n}}).commentsByPhotoId.map((function(e){return e.id===t.id?Object(l.a)({},e,{replies:[].concat(Object(v.a)(e.replies),[r])}):e}));e.writeQuery({query:ee,variables:{photoId:n},data:{commentsByPhotoId:Object(v.a)(o)}})}}).catch((function(e){ye({message:e.message,color:"red"}),console.log(e)})),I(""))},onChange:function(e){return I(e.target.value)},value:u?"Replying...":y,type:"text",placeholder:"Type reply and hit Enter",autoFocus:!0}))))};function Mt(){var e=Object(b.a)(["\n\tsubscription onPhotoAdded {\n\t\tphotoAdded {\n\t\t\t...TimelinePhoto\n\t\t}\n\t}\n\t","\n"]);return Mt=function(){return e},e}function qt(){var e=Object(b.a)(["\n\tsubscription onPhotoLikedOrUnliked($identifier: String!) {\n\t\tphotoLikedOrUnliked(identifier: $identifier) {\n\t\t\tlikerId\n\t\t\taction\n\t\t}\n\t}\n"]);return qt=function(){return e},e}function _t(){var e=Object(b.a)(["\n\tsubscription onReplyAdded {\n\t\treplyAdded {\n\t\t\t...ReplyDataSub\n\t\t}\n\t}\n\t","\n"]);return _t=function(){return e},e}function Ft(){var e=Object(b.a)(["\n\tsubscription onCommentAdded($photoId: ID!) {\n\t\tcommentAdded(photoId: $photoId) {\n\t\t\t...PhotoComment\n\t\t\treplies {\n\t\t\t\t...ReplyData\n\t\t\t}\n\t\t}\n\t}\n\t","\n\t","\n"]);return Ft=function(){return e},e}var Rt=O()(Ft(),C,w),At=(O()(_t(),$),O()(qt())),Lt=O()(Mt(),U),Qt=function(e){var t=e.photoId,n=Object(be.a)(),o=Object(be.b)(Et),c=Object(Oe.a)(o,1)[0],i=Object(be.c)(A).data.authUser;Object(be.d)(Rt,{variables:{photoId:t},onSubscriptionData:function(e){var n=e.client.cache,a=e.subscriptionData.data.commentAdded;if(i.userId!==a.commentor.id){var r=n.readQuery({query:ee,variables:{photoId:t}}).commentsByPhotoId;n.writeQuery({query:ee,variables:{photoId:t},data:{commentsByPhotoId:[].concat(Object(v.a)(r),[a])}}),c({variables:{id:t}})}}});var l=r.a.useState([]),s=Object(Oe.a)(l,2),u=s[0],m=s[1],d=r.a.useState(0),f=Object(Oe.a)(d,2),p=f[0],h=f[1],g=r.a.useState([]),b=Object(Oe.a)(g,2),E=b[0],O=b[1],j=r.a.useState(0),y=Object(Oe.a)(j,2),I=y[0],P=y[1];Object(a.useEffect)((function(){n.query({query:ee,variables:{photoId:t}}).then((function(e){P(Math.ceil(e.data.commentsByPhotoId.length/5));var t=5*p,n=t+5;m(e.data.commentsByPhotoId.slice(t,n)),O((function(t){return[].concat(Object(v.a)(t),Object(v.a)(e.data.commentsByPhotoId))}))})).catch((function(e){console.log("error from Comments",e)}));var e=n.watchQuery({query:ee,variables:{photoId:t}}).subscribe((function(e){var t=e.data;P(Math.ceil(t.commentsByPhotoId.length/5)),m(t.commentsByPhotoId),O(t.commentsByPhotoId)}));return function(){e.unsubscribe()}}),[t]);r.a.useEffect((function(){var e=function(){var e=5*p,t=e+5;return E.slice(e,t)}();m((function(t){return[].concat(Object(v.a)(t),Object(v.a)(e))}))}),[p]);var N;return r.a.createElement(r.a.Fragment,null,u.length>0&&r.a.createElement("div",null,!(p>=I-1)&&r.a.createElement("span",{className:"view-more-comments",onClick:function(){h((function(e){return e+1}))}},"view more comments"),(N=u,N.reduce((function(e,t){var n=e;return e.indexOf(t)>-1?e:(n.push(t),n)}),[])).map((function(e,n){return r.a.createElement(xt,{key:e.id,comment:e,photoId:t})}))))},Bt={user:{display:"flex",alignItems:"center",cursor:"pointer",marginTop:10}},Gt=function(e){var t=e.user,n=e.visitProfile;return r.a.createElement("div",{style:Bt.user,onClick:n},r.a.createElement(De,{src:t.profile?t.profile.picture:"/img/cam1.jpeg"}),r.a.createElement("p",null,r.a.createElement("span",null,t.username)))},zt=function(e){var t=e.closeModal,n=e.ids,o=e.photoId,c=Object(Ee.g)(),i=Object(a.useState)([]),l=Object(Oe.a)(i,2),s=l[0],u=l[1],m=Object(be.c)(A).data.authUser,d=Object(be.a)();Object(a.useEffect)((function(){d.query({query:te,variables:{ids:n}}).then((function(e){u(e.data.photoLikers)})).catch((function(e){console.log("likers error",e)}))}),[n]);return r.a.createElement(r.a.Fragment,null,r.a.createElement($e,{title:"Users who liked the photo",className:"likers-modal"+o},s.length>0&&r.a.createElement($t,null,s.map((function(e,n){return r.a.createElement(Ut,{key:e.id+n,style:{backgroundColor:"inherit"}},r.a.createElement(Gt,{user:e,visitProfile:function(){return function(e){if(t(),m.userId===e)return c.push("/profile");c.push("/profile/"+e,{id:e})}(e.id)}}))}))),r.a.createElement("div",{className:"right-align"},r.a.createElement(at,{className:"btn-auth",onClick:function(){return t(o)}},"Close"))))},Yt=function(e){var t=e.children,n=e.className,a=Object(Pe.a)(e,["children","className"]);return r.a.createElement("i",Object.assign({className:Object(Ie.a)(["material-icons",n])},a),t)},Jt=function(e){var t=Object(be.b)(Je),n=Object(Oe.a)(t,2),a=n[0],o=n[1].loading,c=Object(be.b)(We),i=Object(Oe.a)(c,2),l=i[0],s=i[1].loading,u=Object(be.b)(Ot),m=Object(Oe.a)(u,1)[0],d=Object(be.a)(),f=r.a.useState(e.photo),p=Object(Oe.a)(f,2),h=p[0],g=p[1],b=Object(Ee.g)(),v=Object(be.c)(A).data.authUser,E=r.a.useRef(null),O=r.a.useRef(null),j=r.a.useRef(null);Object(be.d)(At,{variables:{identifier:"photo-".concat(e.photo.node.id)},onSubscriptionData:function(e){var t=e.subscriptionData.data.photoLikedOrUnliked;t.likerId!==v.userId&&m({variables:{photoId:h.node.id,likerId:t.likerId,action:t.action}})}});var y=function(e){e.edges.forEach((function(e){e.node.id===h.node.id&&(e.node.likes.length!==h.node.likes.length&&g(e),e.node.totalComment!==h.node.totalComment&&g(e))}))};r.a.useEffect((function(){var t=d.watchQuery({query:V}).subscribe((function(e){var t=e.data.photos;y(t)})),n=d.watchQuery({query:X,variables:{id:e.userIdForSharedPhotos||v.userId}}).subscribe((function(e){var t=e.data.user.sharedPhotos;y(t)}));return function(){t.unsubscribe(),n.unsubscribe()}}),[h]);var I=function(e){var t=document.querySelectorAll(".likers-modal"+e),n=M.Modal.init(t);j.current=n[0],j.current.open()};return r.a.createElement(Ne,{id:"timeline-picture-card"},r.a.createElement(Se,null,r.a.createElement(rt,null,r.a.createElement(it,{sm:12,className:"timeline-picture-avatar-container"},r.a.createElement(De,{src:h.node.owner.profile?h.node.owner.profile.picture:"/img/cam1.jpeg"}),r.a.createElement("span",{onClick:function(){return function(e){if(v.userId===e)return b.push("/profile");b.push("/profile/"+e,{id:e})}(h.node.owner.id)},className:"pink-text username"},h.node.owner.username))),r.a.createElement(rt,null,r.a.createElement(it,{sm:12},r.a.createElement("span",null,h.node.description))),r.a.createElement(we,{src:h.node.photoUrl||"/img/cam4.jpeg"})),r.a.createElement(Te,null),r.a.createElement(Se,{style:{paddingTop:5,paddingBottom:5}},r.a.createElement("div",{className:"like-comment-container"},r.a.createElement("span",{className:"likes",onClick:function(){return e=h.node.id,void(h.node.likes.length&&I(e));var e}},h.node.likes.length," likes"),r.a.createElement("span",null,h.node.totalComment," comments"))),r.a.createElement(Te,null),r.a.createElement(Se,{style:{paddingTop:0,paddingBottom:0}},r.a.createElement("div",{className:"like-comment-container"},o&&s?"Sending...":r.a.createElement("button",{onClick:function(){O.current.children[0].classList.contains("indigo-text")?l({variables:{unlikePhotoData:{photoId:h.node.id,likerId:v.userId}}}).then((function(e){m({variables:{photoId:h.node.id,likerId:v.userId,action:"unlike"}})})).catch((function(e){ye({message:e.message,color:"red"}),console.log(e)})):a({variables:{likePhotoData:{photoId:h.node.id,likerId:v.userId}}}).then((function(e){m({variables:{photoId:h.node.id,likerId:v.userId,action:"like"}})})).catch((function(e){ye({message:e.message,color:"red"}),console.log(e)}))},style:{textTransform:"capitalize"},className:"btn waves-effect btn-flat like-btn",ref:O},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.findIndex((function(e){return e===v.userId}))>-1}(h.node.likes)?r.a.createElement("i",{className:"fas  indigo-text fa-thumbs-up",style:{fontSize:22}}):r.a.createElement("i",{className:"fas  pink-text fa-thumbs-up",style:{fontSize:22}})),r.a.createElement(at,{className:"comment-btn",onClick:function(){return E.current.focus()}},r.a.createElement(Yt,{children:"comment",style:{fontSize:25}})))),r.a.createElement(Te,null),r.a.createElement(Se,null,h.node.id&&r.a.createElement(Qt,{photoId:h.node.id,key:h.node.cursor}),r.a.createElement(St,{ref:E,photoId:h.node.id})),h.node.likes.length>0&&r.a.createElement(Se,null,r.a.createElement(zt,{photoId:h.node.id,closeModal:function(){j.current.close()},ids:h.node.likes})))},Wt=function(e){var t=e.loadMorePhotos,n=e.photos,a=e.hasNextPage,o=e.userIdForSharedPhotos;return r.a.createElement(xe.a,{next:t,dataLength:n.length,hasMore:a,loader:r.a.createElement(je,null)},n.map((function(e){return r.a.createElement(Jt,{userIdForSharedPhotos:o,photo:e,key:e.node.id})})))},Kt=(n(93),function(e){var t=e.closeModal,n=Object(be.b)(Ve),o=Object(Oe.a)(n,2),c=o[0],i=o[1].loading,l=Object(be.b)(jt),s=Object(Oe.a)(l,1)[0],u=Object(be.b)(It),m=Object(Oe.a)(u,1)[0],d=Object(be.c)(A).data.authUser,f=Object(a.useState)(null),p=Object(Oe.a)(f,2),h=p[0],g=p[1],b=Object(a.useState)(""),v=Object(Oe.a)(b,2),E=v[0],O=v[1],j=Object(a.useState)(""),y=Object(Oe.a)(j,2),I=y[0],P=y[1];Object(be.d)(Lt,{onSubscriptionData:function(e){e.client.cache;var t=e.subscriptionData.data.photoAdded;t.owner.id!==d.userId&&m({variables:{notification:t}})}});var N=function(e){g(e.target.files[0])},k=function(e){var t={};return e.file?e.description?e.category||(t.category="Select a category of your photo"):t.description="Please do write a description about your photo":t.file="You need to select a photo",t};return r.a.createElement(r.a.Fragment,null,r.a.createElement($e,{title:"Select"},r.a.createElement("div",{className:"file-field input-field"},r.a.createElement(at,{className:"upload-btn"},r.a.createElement(Yt,{children:"add_a_photo"}),r.a.createElement("input",{type:"file",onInput:N})),r.a.createElement("div",{className:"file-path-wrapper"},r.a.createElement("input",{className:"file-path validate",type:"text",onInput:N}))),r.a.createElement(kt,{id:"description",name:"description",type:"text",label:"A little description of your picture",labelClassName:"noactive",onChange:function(e){return O(e.target.value)},value:E}),r.a.createElement("div",{className:"input-field "},r.a.createElement("select",{value:I,onChange:function(e){return P(e.target.value)},id:"category",name:"category",style:{display:"block",background:"inherit"}},r.a.createElement("option",{value:""},"Select Category"),r.a.createElement("option",{value:"ACTION"},"Action"),r.a.createElement("option",{value:"PETS"},"Pets"),r.a.createElement("option",{value:"FUN"},"Fun"),r.a.createElement("option",{value:"MOVIES"},"Movies"),r.a.createElement("option",{value:"TRAVEL"},"Travel"),r.a.createElement("option",{value:"OTHER"},"Other"))),r.a.createElement("div",{className:"right-align"},r.a.createElement(at,{disabled:i,className:"btn-auth",onClick:function(){var e=k({file:h,description:E,category:I});if(Object.keys(e).length>0){var n=[];for(var a in e)n.push(e[a]);ye({message:n.join(","),color:"red"})}else c({variables:{photoData:{owner:d.userId,photo:h,description:E,taggedUsers:[],category:I}}}).then((function(e){P(""),g(null),O(""),t(),ye({message:"Successfully Added",color:"green"}),s({variables:{photo:e.data.createPhoto,userId:d.userId}})})).catch((function(e){ye({message:e.message,color:"red"}),console.log("error sharing photo",e)}))}},"Share"),r.a.createElement(at,{disabled:i,className:"btn-auth",onClick:t},"Close"),i&&r.a.createElement(je,null))))}),Ht=function(e){var t=e.me,n=r.a.useRef(null);r.a.useEffect((function(){var e=document.querySelectorAll(".modal"),t=M.Modal.init(e);n.current=t[0]}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne,{id:"share-picture-card"},r.a.createElement(ke,{className:"grey lighten-5",id:"share-picture-header"},r.a.createElement("span",null,"Share a picture")),r.a.createElement(Se,null,r.a.createElement("div",{className:"avatar-container"},r.a.createElement(De,{src:t.profile?t.profile.picture:"/img/cam1.jpeg"}),r.a.createElement("span",null,"Would you like to share a picture?"))),r.a.createElement(Ce,{className:"center",id:"share-picture-action"},r.a.createElement(at,{className:" btn-auth",onClick:function(){n.current.open()}},r.a.createElement(Yt,{children:"add_a_photo",style:{fontSize:30}}))),r.a.createElement(Kt,{closeModal:function(){n.current.close()}})))},Zt=function(){var e=Object(be.c)(V),t=e.data,n=e.loading,a=e.error,o=e.fetchMore,c=Object(be.a)(),i=r.a.useState([]),l=Object(Oe.a)(i,2),s=l[0],u=l[1];return r.a.useEffect((function(){var e=c.watchQuery({query:V}).subscribe((function(e){var t=e.data.photos;s.length!==t.edges.length&&u(t.edges)}));return function(){e.unsubscribe()}}),[]),r.a.createElement(r.a.Fragment,null,a&&ye({message:a.message,color:"red"}),n&&r.a.createElement(je,null),t&&t.me&&r.a.createElement(rt,null,r.a.createElement(it,{sm:12,md:8,mdOffset:2,lg:6,lgOffset:3},r.a.createElement(Ht,{me:t.me}))),t&&t.photos&&r.a.createElement(rt,null,r.a.createElement(it,{sm:12,md:8,mdOffset:2,lg:6,lgOffset:3},r.a.createElement(Wt,{photos:s,hasNextPage:t.photos.pageInfo.hasNextPage||!1,loadMorePhotos:function(){o({variables:{after:t.photos.pageInfo.endCursor},updateQuery:function(e,t){var n=t.fetchMoreResult,a=n.photos.edges,r=n.photos.pageInfo;return a.length?{photos:{__typename:e.photos.__typename,edges:[].concat(Object(v.a)(e.photos.edges),Object(v.a)(a)),pageInfo:r},me:e.me}:e}})}}))))},Vt=function(e){var t=e.profile;return r.a.createElement("div",{className:"profile"},r.a.createElement("img",{src:t?t.picture:"/img/cam1.jpeg",alt:"some profile",id:"cover"}),r.a.createElement("img",{src:t?t.picture:"/img/cam4.jpeg",alt:"some profile",id:"profile-avatar"}))},Xt=function(e){var t=e.closeModal,n=e.updateProfile,o=Object(be.b)(Xe),c=Object(Oe.a)(o,2),i=c[0],l=c[1].loading,s=Object(be.c)(A).data.authUser,u=Object(a.useState)(null),m=Object(Oe.a)(u,2),d=m[0],f=m[1],p=Object(a.useState)(""),h=Object(Oe.a)(p,2),g=h[0],b=h[1],v=function(e){f(e.target.files[0])},E=function(e){var t={};return e.file?e.description||(t.description="Please do write a description about your photo"):t.file="You need to select a photo",t};return r.a.createElement(r.a.Fragment,null,r.a.createElement($e,{title:"Select",className:"add-profile-modal"},r.a.createElement("div",{className:"file-field input-field"},r.a.createElement(at,{className:"upload-btn"},r.a.createElement(Yt,{children:"add_a_photo"}),r.a.createElement("input",{type:"file",onInput:v})),r.a.createElement("div",{className:"file-path-wrapper"},r.a.createElement("input",{className:"file-path validate",placeholder:"Select Profile Picture",type:"text",onInput:v}))),r.a.createElement(kt,{id:"description",name:"description",type:"text",label:"A little description about yourself",labelClassName:"noactive",onChange:function(e){return b(e.target.value)},value:g}),r.a.createElement("div",{className:"right-align"},r.a.createElement(at,{disabled:l,className:"btn-auth",onClick:function(){var e=E({file:d,description:g});if(Object.keys(e).length>0){var a=[];for(var r in e)a.push(e[r]);ye({message:a.join(","),color:"red"})}else i({variables:{profileData:{owner:s.userId,picture:d,about:g}},update:function(e,a){var r=a.data.createProfile;f(null),b(""),t(),ye({message:"Successfully Added",color:"green"}),n({cache:e,createProfile:r})}}).catch((function(e){ye({message:e.message,color:"red"}),console.log("error adding user profile",e)}))}},"Save"),r.a.createElement(at,{disabled:l,className:"btn-auth",onClick:t},"Cancel"),l&&r.a.createElement(je,null))))},en=function(e){var t=e.profileId,n=e.showChangeProfilePic,o=Object(be.b)(tt),c=Object(Oe.a)(o,2),i=c[0],l=c[1].loading,s=Object(be.b)(Pt),u=Object(Oe.a)(s,1)[0],m=Object(be.c)(A).data.authUser,d=Object(a.useState)(null),f=Object(Oe.a)(d,2),p=f[0],h=f[1],g=function(e){h(e.target.files[0])},b=function(e){var t={};return e.file||(t.file="You need to select a photo"),t};return r.a.createElement(Ne,null,r.a.createElement("div",{className:"file-field input-field"},r.a.createElement(at,{className:"upload-btn"},r.a.createElement(Yt,{children:"add_a_photo"}),r.a.createElement("input",{type:"file",onInput:g})),r.a.createElement("div",{className:"file-path-wrapper"},r.a.createElement("input",{className:"file-path validate",placeholder:"Select Another Profile Picture",type:"text",onInput:g}))),r.a.createElement("div",{className:"right-align"},r.a.createElement(at,{disabled:l,className:"btn-auth",onClick:function(){var e=b({file:p});if(Object.keys(e).length>0){var a=[];for(var r in e)a.push(e[r]);ye({message:a.join(","),color:"red"})}else i({variables:{id:t,picture:p}}).then((function(e){h(null),n(!1),ye({message:"Successfully Added",color:"green"});var t=e.data.editProfilePicture;u({variables:{userId:m.userId,profile:t}})})).catch((function(e){ye({message:e.message,color:"red"}),console.log("error adding user profile",e)}))}},"Save"),l&&r.a.createElement(je,null)))},tn=function(e){var t=e.about,n=e.profileId,o=e.showEditProfile,c=Object(be.b)(et),i=Object(Oe.a)(c,2),l=i[0],s=i[1].loading,u=Object(be.b)(Pt),m=Object(Oe.a)(u,1)[0],d=Object(be.c)(A).data.authUser,f=Object(a.useState)(t),p=Object(Oe.a)(f,2),h=p[0],g=p[1],b=function(e){var t={};return e.description||(t.description="Please do write a description about your photo"),t};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne,null,r.a.createElement(Se,null,r.a.createElement("div",{className:"input-field "},r.a.createElement("textarea",{id:"profile-description",className:"materialize-textarea",onChange:function(e){return g(e.target.value)},value:h}),r.a.createElement("label",{htmlFor:"profile-description",className:"active"},"Edit about yourself")),r.a.createElement("div",{className:"right-align"},r.a.createElement(at,{disabled:s,className:"btn-auth",onClick:function(){var e=b({description:h});if(Object.keys(e).length>0){var t=[];for(var a in e)t.push(e[a]);ye({message:t.join(","),color:"red"})}else l({variables:{id:n,about:h}}).then((function(e){g(""),o(!1),ye({message:"Successfully Added",color:"green"});var t=e.data.editProfile;m({variables:{userId:d.userId,profile:t}})})).catch((function(e){ye({message:e.message,color:"red"}),console.log("error adding user profile",e)}))}},"Save"),s&&r.a.createElement(je,null)))))},nn=function(e){var t=e.profile;return r.a.createElement("p",{style:{marginBottom:30}},t?t.about:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Ab voluptatum eum, rem\n\t\t\t\t\t\t\t\t\t\tneque incidunt omnis, delectus architecto vero suscipit ducimus esse velit ex\n\t\t\t\t\t\t\t\t\t\ttempore magni debitis aliquid odit at adipisci.")},an=(n(94),function(e){var t=e.userId,n=Object(be.c)(A).data.authUser,o=Object(be.c)(X,{variables:{id:t||n.userId}}),c=o.data,i=o.loading,s=o.error,u=o.fetchMore,m=Object(a.useState)(!1),d=Object(Oe.a)(m,2),f=d[0],p=d[1],h=Object(a.useState)(!1),g=Object(Oe.a)(h,2),b=g[0],E=g[1],O=r.a.useRef(null);r.a.useEffect((function(){var e=document.querySelectorAll(".add-profile-modal"),t=M.Modal.init(e);O.current=t[0]}));return r.a.createElement(r.a.Fragment,null,s&&ye({message:s.message,color:"red"}),i&&r.a.createElement(je,null),c&&c.me&&!t&&r.a.createElement(Vt,{profile:c.me.profile}),c&&c.user&&r.a.createElement("div",null,t&&r.a.createElement(Vt,{profile:c.user.profile}),r.a.createElement(rt,null,r.a.createElement(it,{sm:12},r.a.createElement(Ne,null,r.a.createElement(Se,null,r.a.createElement(ke,{style:{marginBottom:30}},r.a.createElement("span",null,c.user.username)),r.a.createElement(Te,null),r.a.createElement(ke,{style:{marginTop:30}},r.a.createElement("span",null,"About")),t&&r.a.createElement(nn,{profile:c.user.profile}),!t&&r.a.createElement(nn,{profile:c.me.profile}),!t&&r.a.createElement(r.a.Fragment,null,c.me.profile?r.a.createElement("div",{className:"right-align"},r.a.createElement(at,{onClick:function(){return p((function(e){return!e}))},className:"btn-auth"},f?"Cancel":"Edit Profile"),r.a.createElement(at,{onClick:function(){return E((function(e){return!e}))},className:"btn-auth"},b?"Cancel":"Change Picture")):r.a.createElement("div",{className:"right-align"},r.a.createElement(at,{onClick:function(){O.current.open()},className:"btn-auth "},"Add Profile"))),f&&r.a.createElement(r.a.Fragment,null,r.a.createElement(tn,{style:{marginTop:30},about:c.me.profile.about,profileId:c.me.profile.id,showEditProfile:p})),b&&r.a.createElement(en,{style:{marginTop:30},profileId:c.me.profile.id,showChangeProfilePic:E}))))),r.a.createElement("div",{className:"pink-text center-align shared-photos"},r.a.createElement("span",null,t?"Photos shared by ".concat(c.user.username):"Photos you shared")),r.a.createElement(rt,null,r.a.createElement(it,{sm:12,md:8,mdOffset:2,lg:6,lgOffset:3},r.a.createElement(Wt,{userIdForSharedPhotos:t,photos:c.user.sharedPhotos.edges||[],hasNextPage:c.user.sharedPhotos.pageInfo.hasNextPage||!1,loadMorePhotos:function(){u({variables:{after:c.user.sharedPhotos.pageInfo.endCursor},updateQuery:function(e,t){var n=t.fetchMoreResult,a=n.user.sharedPhotos.edges,r=n.user.sharedPhotos.pageInfo;return a.length?{user:Object(l.a)({},e.user,{sharedPhotos:{__typename:e.user.sharedPhotos.__typename,edges:[].concat(Object(v.a)(e.user.sharedPhotos.edges),Object(v.a)(a)),pageInfo:r},__typename:e.user.__typename}),me:e.me}:e}})}})))),r.a.createElement(Xt,{closeModal:function(){O.current.close()},updateProfile:function(e){var t=e.cache,a=e.createProfile,r=t.readQuery({query:X,variables:{id:n.userId}}),o=r.user,c=r.me;o.profile=Object(l.a)({},a),c.profile=Object(l.a)({},a),t.writeQuery({query:X,variables:{id:n.userId},data:{user:o,me:c}})}}))}),rn=function(e){var t=e.signUp,n=Object(be.c)(L).data.signingInOrUp,o=Object(Ee.g)(),c=Object(be.b)(He),i=Object(Oe.a)(c,2),s=i[0],u=i[1].loading,m=Object(be.b)(bt),d=Object(Oe.a)(m,1)[0],f=Object(a.useState)(""),p=Object(Oe.a)(f,2),h=p[0],g=p[1],b=Object(a.useState)(""),v=Object(Oe.a)(b,2),E=v[0],O=v[1];Object(a.useEffect)((function(){d({variables:{state:u}})}),[u]);var j=function(e){var t={};return e.emailOrUsername?e.password||(t.password="Password is required"):t.email="Your email/username is required",t};return r.a.createElement(r.a.Fragment,null,r.a.createElement(kt,{value:h,onChange:function(e){return g(e.target.value)},type:"text",label:"Email or Username",id:"username",name:"username",labelClassName:"noactive"}),r.a.createElement(kt,{value:E,onChange:function(e){return O(e.target.value)},type:"password",label:"Password",id:"password",name:"password",labelClassName:"noactive"}),r.a.createElement("div",{className:"right-align"},r.a.createElement(at,{disabled:n,className:"btn-auth",onClick:function(){var e=j({emailOrUsername:h,password:E});if(Object.keys(e).length>0){var t=[];for(var n in e)t.push(e[n]);ye({message:t.join(","),color:"red"})}else s({variables:{signinData:{emailOrUsername:h.trim(),password:E.trim()}},update:function(e,t){var n=t.data.formSignIn,a=e.readQuery({query:A}).authUser;e.writeData({data:{authUser:Object(l.a)({},a,{},n)}}),localStorage.setItem("auth_user",JSON.stringify(n)),setTimeout((function(){o.push("/")}),0)}}).catch((function(e){e.graphQLErrors.length>0?ye({message:e.graphQLErrors[0].message,color:"red"}):ye({message:e.message,color:"red"})}))}},"Sign In"),r.a.createElement(at,{disabled:n,onClick:t,className:"btn-auth"},"Sign Up")))},on=n(26),cn=n(57),ln=n.n(cn),sn=function(){var e=Object(be.b)(nt),t=Object(Oe.a)(e,2),n=t[0],a=t[1].loading,o=Object(be.c)(L).data.signingInOrUp,c=Object(be.b)(bt),i=Object(Oe.a)(c,1)[0],s=Object(Ee.g)();r.a.useEffect((function(){i({variables:{state:a}})}),[a]);return[function(e){var t=e.codeToken,a=e.providerName;n({variables:{signinData:{codeToken:t,providerName:a}},update:function(e,t){var n=t.data.providerSignIn,a=e.readQuery({query:A}).authUser;e.writeData({data:{authUser:Object(l.a)({},a,{},n)}}),localStorage.setItem("auth_user",JSON.stringify(n)),setTimeout((function(){s.push("/")}),0)}}).catch((function(e){e.graphQLErrors.length>0?ye({message:e.graphQLErrors[0].message,color:"red"}):ye({message:e.message,color:"red"})}))},{signingInOrUp:o}]},un=function(){var e=sn(),t=Object(Oe.a)(e,2),n=t[0],a=t[1].signingInOrUp;return r.a.createElement(ln.a,{style:{fontFamily:"cursive",marginBottom:10},appId:"146820543436674",callback:function(e){var t=e.accessToken;n({codeToken:t,providerName:"facebook"})},render:function(e){return r.a.createElement(on.FacebookLoginButton,{disabled:e.isDisabled||a,onClick:e.onClick},"Sign In with Facebook")}})},mn=n(58),dn=function(){var e=sn(),t=Object(Oe.a)(e,2),n=t[0],a=t[1].signingInOrUp;return r.a.createElement(mn.GoogleLogin,{style:{fontFamily:"cursive",marginBottom:10},clientId:"204663574116-rt4gef32f4vb9a3preg0a9b8mqdm41is.apps.googleusercontent.com",onSuccess:function(e){var t=e.tokenId;n({codeToken:t,providerName:"google"})},cookiePolicy:"single_host_origin",render:function(e){return r.a.createElement(on.GoogleLoginButton,{onClick:e.onClick,disabled:e.disabled||a},"Sign In with Google")}})},fn=function(){var e=sn(),t=Object(Oe.a)(e,2),n=t[0],a=t[1].signingInOrUp,o=Object(be.c)(Q).data.githubCode,c=Object(be.b)(vt),i=Object(Oe.a)(c,1)[0];r.a.useEffect((function(){o&&(n({codeToken:o,providerName:"github"}),i({variables:{value:""}}))}),[o]);return r.a.createElement(on.GithubLoginButton,{disabled:a,onClick:function(){window.location="https://github.com/login/oauth/authorize?client_id=".concat("a6839e36b9ca33f9324c","&scope=user")},style:{fontFamily:"cursive",marginBottom:10}},"Sign In with Github")},pn=function(e){var t=e.signIn,n=Object(a.useState)(""),o=Object(Oe.a)(n,2),c=o[0],i=o[1],l=Object(a.useState)(""),s=Object(Oe.a)(l,2),u=s[0],m=s[1],d=Object(a.useState)(""),f=Object(Oe.a)(d,2),p=f[0],h=f[1],g=Object(a.useState)(""),b=Object(Oe.a)(g,2),v=b[0],E=b[1],O=Object(be.b)(bt),j=Object(Oe.a)(O,1)[0],y=Object(be.b)(Ze),I=Object(Oe.a)(y,2),P=I[0],N=I[1].loading,k=Object(be.c)(L).data.signingInOrUp,S=function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)?e.username?e.password?e.password.length<8?t.password="Password length must be greater than 7":e.confirmPass?e.confirmPass!==e.password&&(t.confirmPass="Password and confirm password fields must be the same"):t.confirmPass="Re-enter password to confirm":t.password="Password is required":t.username="Your username is required":t.email="Your email is invalid":t.email="Your email is required",t};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Se,null,r.a.createElement(ke,{className:"pink-text center-align",style:{marginBottom:20}},r.a.createElement("span",{style:{fontWeight:600}},"Sign Up")),r.a.createElement(kt,{value:c,onChange:function(e){return i(e.target.value)},type:"email",label:"Email ",id:"email",name:"email",labelClassName:"noactive"}),r.a.createElement(kt,{value:u,onChange:function(e){return m(e.target.value)},type:"text",label:"Username",id:"username",name:"username",labelClassName:"noactive"}),r.a.createElement(kt,{value:v,onChange:function(e){return E(e.target.value)},type:"password",label:"Password",id:"password",name:"password",labelClassName:"noactive"}),r.a.createElement(kt,{type:"password",label:"Confirm Password",id:"confirmPass",name:"confirmPass",labelClassName:"noactive",value:p,onChange:function(e){return h(e.target.value)}}),r.a.createElement("div",{className:"right-align"},r.a.createElement(at,{disabled:k,className:"btn-auth",onClick:function(){var e=S({email:c,username:u,confirmPass:p,password:v});if(Object.keys(e).length>0){var n=[];for(var a in e)n.push(e[a]);ye({message:n.join(","),color:"red"})}else j({variables:{state:N}}),P({variables:{signupData:{username:u.trim(),email:c.trim(),password:v.trim()}}}).then((function(e){ye({message:"You can now sign in",color:"green"}),j({variables:{state:!1}}),t()})).catch((function(e){ye({message:e.message,color:"red"}),console.log("error signing up",e)}))}},"Sign Up"),r.a.createElement(at,{disabled:k,onClick:t,className:"btn-auth"},"Sign In"))))},hn={loginContainer:{height:"100vh",margin:0,display:"flex",alignItems:"center"}},gn=function(e){var t=e.signUp;return r.a.createElement(Se,null,r.a.createElement(ke,{className:"pink-text center-align",style:{marginBottom:20}},r.a.createElement("span",{style:{fontWeight:600}},"Sign In")),r.a.createElement(fn,null),r.a.createElement(dn,null),r.a.createElement(un,null),r.a.createElement(ke,{className:"pink-text center-align",style:{marginTop:20}},r.a.createElement("span",{style:{fontWeight:600}},"OR")),r.a.createElement(rn,{signUp:t}))},bn=function(){var e=r.a.useState(!1),t=Object(Oe.a)(e,2),n=t[0],a=t[1];return r.a.createElement(rt,{style:hn.loginContainer,className:"login-container"},r.a.createElement(it,{sm:12,md:7,mdOffset:2,lg:4,lgOffset:4},r.a.createElement(Ne,{className:"grey lighten-4 "},!n&&r.a.createElement(gn,{signUp:function(){return a(!0)}}),n&&r.a.createElement(pn,{signIn:function(){return a(!1)}}))))},vn=function(){var e=Object(be.c)(L).data.signingInOrUp;return r.a.createElement(r.a.Fragment,null,e&&r.a.createElement(je,null),r.a.createElement(bn,null))},En=function(){var e=Object(Ee.h)();return r.a.createElement(an,{userId:e.state.id})},On=function(){var e=Object(Ee.h)(),t=Object(be.c)(ne,{variables:{searchText:e.state?e.state.searchText:""}}),n=t.data,a=t.loading,o=t.fetchMore;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",{className:"center pink-text"},"Search Results"),a&&r.a.createElement(je,null),n&&0===n.searchPhotos.edges.length&&r.a.createElement(Ue,null,r.a.createElement("h5",{style:{marginTop:60}},"No results found")),r.a.createElement(rt,null,r.a.createElement(it,{sm:12,md:8,mdOffset:2,lg:6,lgOffset:3},r.a.createElement(Wt,{photos:n&&n.searchPhotos.edges||[],hasNextPage:n&&n.searchPhotos.pageInfo.hasNextPage||!1,loadMorePhotos:function(){o({variables:{after:n&&n.searchPhotos.pageInfo.endCursor},updateQuery:function(e,t){var n=t.fetchMoreResult,a=n.searchPhotos.edges,r=n.searchPhotos.pageInfo;return a.length?{searchPhotos:{__typename:e.searchPhotos.__typename,edges:[].concat(Object(v.a)(e.searchPhotos.edges),Object(v.a)(a)),pageInfo:r}}:e}})}}))))},jn=function(e){var t=e.openModal,n=Object(be.a)(),o=Object(a.useRef)(""),c=Object(be.c)(B).data.notifications,i=Object(Ee.g)();return r.a.createElement("div",{className:"navbar-fixed"},r.a.createElement("nav",{className:"nav-wrapper pink"},r.a.createElement("div",{className:"container"},r.a.createElement("ul",null,r.a.createElement("li",{className:"left search"},r.a.createElement("input",{onChange:function(e){o.current=e.target.value,i.push("/search-results",{searchText:e.target.value})},type:"text",name:"searchTerm",placeholder:"Search Photos",id:"search",value:o.current})),r.a.createElement("li",{className:"right sign-out",id:"notifications",onClick:function(){0!==c.length&&t()}},r.a.createElement(Yt,{children:"notifications"}),r.a.createElement("span",{id:"notifications-value"},c.length)),r.a.createElement("li",{className:"right sign-out",onClick:function(){return localStorage.removeItem("auth_user"),n.resetStore(),i.replace("/signin",{logout:!0})}},r.a.createElement("i",{className:"fas fa-sign-out-alt"})),r.a.createElement("li",{className:"right"},r.a.createElement(ve.b,{to:"/profile"},r.a.createElement("i",{className:"fas fa-user-circle"}))),r.a.createElement("li",{className:"right home"},r.a.createElement(ve.b,{to:"/"},r.a.createElement(Yt,{children:"home"})))))))},yn=function(){return r.a.createElement("footer",{className:"page-footer pink darken-1 white-text"},r.a.createElement(Ue,null,r.a.createElement(rt,null,r.a.createElement(it,{sm:4,smOffset:2,md:3,mdOffset:3},r.a.createElement("h5",null,"About"),r.a.createElement("ul",{className:"white-text"},r.a.createElement("li",null,r.a.createElement("a",{className:"white-text",href:"#!"},"Blog")))),r.a.createElement(it,{sm:4,smOffset:2,md:3,mdOffset:3},r.a.createElement("h5",null,"Contact"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{className:"white-text",href:"#!"},"Twitter")),r.a.createElement("li",null,r.a.createElement("a",{className:"white-text",href:"#!"},"Facebook")),r.a.createElement("li",null,r.a.createElement("a",{className:"white-text",href:"#!"},"Github"))))),r.a.createElement(rt,{style:{marginBottom:0}},r.a.createElement(it,{sm:12},r.a.createElement("div",{className:"footer-copyright center-align"},r.a.createElement(Ue,null,"\xa9 ",(new Date).getFullYear()," instaphotos.com"))))))},In=function(e){var t=e.children,n=e.openModal;return r.a.createElement(r.a.Fragment,null,r.a.createElement(jn,{openModal:n}),t,r.a.createElement(yn,null))},Pn={user:{display:"flex",alignItems:"center",cursor:"pointer",marginTop:10}},Nn=function(e){var t=e.notification,n=e.handleNotificationClicked;return r.a.createElement(Ut,{onClick:function(){return n(t)}},r.a.createElement("div",{style:Pn.user},r.a.createElement(De,{src:t.owner.profile?t.owner.profile.picture:"/img/cam1.jpeg"}),r.a.createElement("p",null,r.a.createElement("span",null,t.description?t.description:"Blablablablaalbbla"))))},kn=function(e){var t=e.notifications,n=e.closeModal,a=Object(be.b)(jt),o=Object(Oe.a)(a,1)[0],c=Object(be.b)(yt),i=Object(Oe.a)(c,1)[0],l=function(e){n(),o({variables:{photo:e}}),i({variables:{photo:e}})},s=t.map((function(e){return r.a.createElement(Nn,{handleNotificationClicked:l,key:e.id,notification:e})}));return r.a.createElement($e,{className:"notifications-modal",title:"Photos just shared by users, click to see"},r.a.createElement($t,null,s))};var Sn=function(){var e=Object(be.a)(),t=Object(be.c)(A).data.authUser,n=Object(be.c)(B).data.notifications,a=r.a.useRef(null),o=function(){var e=document.querySelectorAll(".notifications-modal"),t=M.Modal.init(e);a.current=t[0],a.current.open()};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ve.a,null,r.a.createElement(Ee.d,null,r.a.createElement(Ee.b,{path:"/",exact:!0,render:function(e){e.history;return t.token?r.a.createElement(In,{openModal:o},r.a.createElement(Zt,null)):r.a.createElement(Ee.a,{to:"/signin"})}}),r.a.createElement(Ee.b,{path:"/signin",exact:!0,render:function(n){var a=n.history;if(a.location.state&&a.location.state.logout)return a.location.state.logout=!1,r.a.createElement(vn,null);a.location.search.match(/code=/)&&(!function(t){e.mutate({mutation:vt,variables:{value:t}}).catch((function(e){console.log("error",e)}))}(a.location.search.replace("?code=","")),a.replace("/signin"));return t.token?r.a.createElement(Ee.a,{to:"/"}):r.a.createElement(vn,null)}}),r.a.createElement(Ee.b,{path:"/profile",exact:!0,render:function(){return t.token?r.a.createElement(In,{openModal:o},r.a.createElement(an,null)):r.a.createElement(Ee.a,{to:"/signin"})}}),r.a.createElement(Ee.b,{path:"/profile/:id",exact:!0,render:function(){return t.token?r.a.createElement(In,{openModal:o},r.a.createElement(En,null)):r.a.createElement(Ee.a,{to:"/signin"})}}),r.a.createElement(Ee.b,{path:"/search-results",exact:!0,render:function(){return t.token?r.a.createElement(In,{openModal:o},r.a.createElement(On,null)):r.a.createElement(Ee.a,{to:"/signin"})}}),r.a.createElement(Ee.a,{to:"/signin"}))),r.a.createElement(kn,{notifications:n,closeModal:function(){a.current.close()}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(i.a,{client:ge},r.a.createElement(Sn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[60,1,2]]]);
//# sourceMappingURL=main.b2798d36.chunk.js.map